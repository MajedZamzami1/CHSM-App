<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Form</title> 
</head>
<body>
    <script type = 'text/javascript'>
      // var browserify = require('browserify');


function submitData(){
  var id = $('#id').val();
  var name = $('#name').val();
  var surname = $('#surname').val();
  var birthdate = $('#birthdate').val();
  var trip = $('#trip').val();
  var location = $('#location').val();
  if (id == '')
  {
  var val = Math.floor(1000 + Math.random() * 9000);
	var id = name[0].toLowerCase() + surname[0].toLowerCase() + val;
  var waiver = false
  }
  else{
    var waiver = true
  }
  toString(id)
  birthdate = birthdate.replaceAll('/', '-')
  url = 'http://127.0.0.1:8000/cgi-bin/getData.py?' + '&id=' + id + '&name='+name + '&surname='+surname + '&birthdate='+birthdate + '&trip='+trip + '&location='+location  + '&waiver=' + waiver

fetch(url)
  .then(data => {
    return data.json();
  }).then(json => { 
   console.log(json['status']);
});

console.log("hi")
}
</script>
  <h1>Form</h1>
<form>
  ID:<br><input type="text" name="id" id="id" required maxlength="6"><br><br>
  Name: <br><input type="text" name="name" id="name" required maxlength="40" required><br><br>
  Surname:<br><input type="text" name="surname" id="surname" required maxlength="40" required><br><br>
  Date of Birth:<br> <input type="birthdate" name="birthdate" id="birthdate" required><br><br>
  Trip:<br> <input type="trip" name="trip" id="trip" required><br><br>
  Location:<br> <input type="location" name="location" id="location" required><br><br>
  <input type="button" id="submit"  onclick=submitData() value="Submit">
</form>
</body>
</html>